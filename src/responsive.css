/* ... existing styles ... */

/* Mobile / Tablet Styles */
@media (max-width: 768px) {

    /* Toolbar: Reduce padding and font size */
    #toolbar {
        padding: 0 12px;
    }

    .logo {
        font-size: 16px;
    }

    .actions button {
        padding: 6px 10px;
        font-size: 12px;
    }

    /* Show Toggle Button */
    #btn-toggle-view {
        display: flex !important;
        background-color: var(--accent-color) !important;
        color: white !important;
    }

    /* Hide Desktop-only interactions */
    #resizer {
        display: none;
    }

    /* Stack panes */
    #workspace {
        /* Fix container height for mobile browsers (address bar issue) */
        position: relative;
        height: calc(100vh - 52px);
        /* Fallback */
        height: calc(100dvh - 52px);
        /* Modern Mobile Viewport Height */
        overflow: hidden;
    }

    #editor-pane,
    #preview-pane {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
        z-index: 1;
        background-color: var(--bg-color);
        /* Ensure scrolling works smoothly */
        -webkit-overflow-scrolling: touch;
    }

    /* Editor handles its own scroll, so no overflow on pane */
    #editor-pane {
        overflow: hidden;
    }

    /* Preview needs explicit overflow */
    #preview-pane {
        overflow-y: auto;
    }

    /* Ensure CodeMirror captures touches properly */
    .cm-scroller {
        touch-action: pan-y;
        overflow-y: auto !important;
    }

    /* Toggle Mechanism: Use Z-Index and Visibility to prevent interaction with hidden layer */

    /* Editor Mode (Default) */
    #workspace:not(.show-preview) #editor-pane {
        z-index: 10;
        visibility: visible;
    }

    #workspace:not(.show-preview) #preview-pane {
        z-index: 0;
        visibility: hidden;
    }

    /* Preview Mode */
    #workspace.show-preview #preview-pane {
        z-index: 10;
        visibility: visible;
    }

    #workspace.show-preview #editor-pane {
        z-index: 0;
        visibility: hidden;
    }

    /* Padding adjustment */
    #preview-pane {
        padding: 24px 16px;
        padding-bottom: 80px;
        /* Extra bottom padding for mobile browsers */
    }
}