/* Mobile & Tablet Optimizations */

/* Defaults hidden on desktop */
.mobile-only {
    display: none !important;
}

@media (max-width: 768px) {
    :root {
        --header-height: 52px;
    }

    .mobile-only {
        display: flex !important;
    }

    /* Toolbar: Compact Mode */
    #toolbar {
        padding: 0 16px;
    }

    .logo {
        font-size: 18px;
    }

    .logo span {
        /* Hide text logo on very small screens if needed, 
           or keep it short. "MD Editor" is short enough. */
    }

    /* Hide Desktop elements */
    #resizer {
        display: none;
    }

    #btn-toc {
        display: none !important;
        /* Access TOC differently or hide on mobile for now */
    }

    /* Layout: Stacked / Tabbed */
    #workspace {
        height: calc(100vh - var(--header-height) - var(--status-height));
        height: calc(100dvh - var(--header-height) - var(--status-height));
    }

    #editor-pane,
    #preview-pane {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
        padding-bottom: 0;
    }

    #preview-pane {
        padding: 24px 16px;
        /* Less padding on mobile */
        padding-bottom: 80px;
        /* Space for overscroll or floating buttons if added */
    }

    /* Toggle Handling */

    /* Default: Show Editor */
    #workspace:not(.show-preview) #editor-pane {
        z-index: 10;
        visibility: visible;
        opacity: 1;
        transform: translateX(0);
        transition: opacity 0.2s, transform 0.2s;
    }

    #workspace:not(.show-preview) #preview-pane {
        z-index: 0;
        visibility: hidden;
        opacity: 0;
        transform: translateX(20px);
        transition: opacity 0.2s, transform 0.2s;
    }

    /* Active: Show Preview */
    #workspace.show-preview #preview-pane {
        z-index: 10;
        visibility: visible;
        opacity: 1;
        transform: translateX(0);
        transition: opacity 0.2s, transform 0.2s;
    }

    #workspace.show-preview #editor-pane {
        z-index: 0;
        visibility: hidden;
        opacity: 0;
        transform: translateX(-20px);
        transition: opacity 0.2s, transform 0.2s;
    }

    /* Enhance Toggle Button Visibility */
    #btn-toggle-view {
        background-color: var(--accent-color) !important;
        color: white !important;
        border: none;
        box-shadow: 0 4px 12px var(--accent-glow);
    }

    #btn-toggle-view:active {
        transform: scale(0.95);
    }

    /* Fix scrolling behavior */
    .cm-scroller,
    #preview-pane {
        touch-action: pan-y;
        -webkit-overflow-scrolling: touch;
    }

    .cm-scroller {
        font-size: 16px !important;
        /* Prevent iOS zoom */
    }
}